<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" />
<meta name="generator" content="AsciiDoc 8.6.7" />
<title></title>
<style type="text/css">
/* Shared CSS for AsciiDoc xhtml11 and html5 backends */

/* Default font. */
body {
  font-family: Georgia,serif;
}

/* Title font. */
h1, h2, h3, h4, h5, h6,
div.title, caption.title,
thead, p.table.header,
#toctitle,
#author, #revnumber, #revdate, #revremark,
#footer {
  font-family: Arial,Helvetica,sans-serif;
}

body {
  margin: 1em 5% 1em 5%;
}

a {
  color: blue;
  text-decoration: underline;
}
a:visited {
  color: fuchsia;
}

em {
  font-style: italic;
  color: navy;
}

strong {
  font-weight: bold;
  color: #083194;
}

h1, h2, h3, h4, h5, h6 {
  color: #527bbd;
  margin-top: 1.2em;
  margin-bottom: 0.5em;
  line-height: 1.3;
}

h1, h2, h3 {
  border-bottom: 2px solid silver;
}
h2 {
  padding-top: 0.5em;
}
h3 {
  float: left;
}
h3 + * {
  clear: left;
}
h5 {
  font-size: 1.0em;
}

div.sectionbody {
  margin-left: 0;
}

hr {
  border: 1px solid silver;
}

p {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

ul, ol, li > p {
  margin-top: 0;
}
ul > li     { color: #aaa; }
ul > li > * { color: black; }

pre {
  padding: 0;
  margin: 0;
}

#author {
  color: #527bbd;
  font-weight: bold;
  font-size: 1.1em;
}
#email {
}
#revnumber, #revdate, #revremark {
}

#footer {
  font-size: small;
  border-top: 2px solid silver;
  padding-top: 0.5em;
  margin-top: 4.0em;
}
#footer-text {
  float: left;
  padding-bottom: 0.5em;
}
#footer-badges {
  float: right;
  padding-bottom: 0.5em;
}

#preamble {
  margin-top: 1.5em;
  margin-bottom: 1.5em;
}
div.imageblock, div.exampleblock, div.verseblock,
div.quoteblock, div.literalblock, div.listingblock, div.sidebarblock,
div.admonitionblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.admonitionblock {
  margin-top: 2.0em;
  margin-bottom: 2.0em;
  margin-right: 10%;
  color: #606060;
}

div.content { /* Block element content. */
  padding: 0;
}

/* Block element titles. */
div.title, caption.title {
  color: #527bbd;
  font-weight: bold;
  text-align: left;
  margin-top: 1.0em;
  margin-bottom: 0.5em;
}
div.title + * {
  margin-top: 0;
}

td div.title:first-child {
  margin-top: 0.0em;
}
div.content div.title:first-child {
  margin-top: 0.0em;
}
div.content + div.title {
  margin-top: 0.0em;
}

div.sidebarblock > div.content {
  background: #ffffee;
  border: 1px solid #dddddd;
  border-left: 4px solid #f0f0f0;
  padding: 0.5em;
}

div.listingblock > div.content {
  border: 1px solid #dddddd;
  border-left: 5px solid #f0f0f0;
  background: #f8f8f8;
  padding: 0.5em;
}

div.quoteblock, div.verseblock {
  padding-left: 1.0em;
  margin-left: 1.0em;
  margin-right: 10%;
  border-left: 5px solid #f0f0f0;
  color: #888;
}

div.quoteblock > div.attribution {
  padding-top: 0.5em;
  text-align: right;
}

div.verseblock > pre.content {
  font-family: inherit;
  font-size: inherit;
}
div.verseblock > div.attribution {
  padding-top: 0.75em;
  text-align: left;
}
/* DEPRECATED: Pre version 8.2.7 verse style literal block. */
div.verseblock + div.attribution {
  text-align: left;
}

div.admonitionblock .icon {
  vertical-align: top;
  font-size: 1.1em;
  font-weight: bold;
  text-decoration: underline;
  color: #527bbd;
  padding-right: 0.5em;
}
div.admonitionblock td.content {
  padding-left: 0.5em;
  border-left: 3px solid #dddddd;
}

div.exampleblock > div.content {
  border-left: 3px solid #dddddd;
  padding-left: 0.5em;
}

div.imageblock div.content { padding-left: 0; }
span.image img { border-style: none; }
a.image:visited { color: white; }

dl {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
dt {
  margin-top: 0.5em;
  margin-bottom: 0;
  font-style: normal;
  color: navy;
}
dd > *:first-child {
  margin-top: 0.1em;
}

ul, ol {
    list-style-position: outside;
}
ol.arabic {
  list-style-type: decimal;
}
ol.loweralpha {
  list-style-type: lower-alpha;
}
ol.upperalpha {
  list-style-type: upper-alpha;
}
ol.lowerroman {
  list-style-type: lower-roman;
}
ol.upperroman {
  list-style-type: upper-roman;
}

div.compact ul, div.compact ol,
div.compact p, div.compact p,
div.compact div, div.compact div {
  margin-top: 0.1em;
  margin-bottom: 0.1em;
}

tfoot {
  font-weight: bold;
}
td > div.verse {
  white-space: pre;
}

div.hdlist {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
div.hdlist tr {
  padding-bottom: 15px;
}
dt.hdlist1.strong, td.hdlist1.strong {
  font-weight: bold;
}
td.hdlist1 {
  vertical-align: top;
  font-style: normal;
  padding-right: 0.8em;
  color: navy;
}
td.hdlist2 {
  vertical-align: top;
}
div.hdlist.compact tr {
  margin: 0;
  padding-bottom: 0;
}

.comment {
  background: yellow;
}

.footnote, .footnoteref {
  font-size: 0.8em;
}

span.footnote, span.footnoteref {
  vertical-align: super;
}

#footnotes {
  margin: 20px 0 20px 0;
  padding: 7px 0 0 0;
}

#footnotes div.footnote {
  margin: 0 0 5px 0;
}

#footnotes hr {
  border: none;
  border-top: 1px solid silver;
  height: 1px;
  text-align: left;
  margin-left: 0;
  width: 20%;
  min-width: 100px;
}

div.colist td {
  padding-right: 0.5em;
  padding-bottom: 0.3em;
  vertical-align: top;
}
div.colist td img {
  margin-top: 0.3em;
}

@media print {
  #footer-badges { display: none; }
}

#toc {
  margin-bottom: 2.5em;
}

#toctitle {
  color: #527bbd;
  font-size: 1.1em;
  font-weight: bold;
  margin-top: 1.0em;
  margin-bottom: 0.1em;
}

div.toclevel0, div.toclevel1, div.toclevel2, div.toclevel3, div.toclevel4 {
  margin-top: 0;
  margin-bottom: 0;
}
div.toclevel2 {
  margin-left: 2em;
  font-size: 0.9em;
}
div.toclevel3 {
  margin-left: 4em;
  font-size: 0.9em;
}
div.toclevel4 {
  margin-left: 6em;
  font-size: 0.9em;
}

span.aqua { color: aqua; }
span.black { color: black; }
span.blue { color: blue; }
span.fuchsia { color: fuchsia; }
span.gray { color: gray; }
span.green { color: green; }
span.lime { color: lime; }
span.maroon { color: maroon; }
span.navy { color: navy; }
span.olive { color: olive; }
span.purple { color: purple; }
span.red { color: red; }
span.silver { color: silver; }
span.teal { color: teal; }
span.white { color: white; }
span.yellow { color: yellow; }

span.aqua-background { background: aqua; }
span.black-background { background: black; }
span.blue-background { background: blue; }
span.fuchsia-background { background: fuchsia; }
span.gray-background { background: gray; }
span.green-background { background: green; }
span.lime-background { background: lime; }
span.maroon-background { background: maroon; }
span.navy-background { background: navy; }
span.olive-background { background: olive; }
span.purple-background { background: purple; }
span.red-background { background: red; }
span.silver-background { background: silver; }
span.teal-background { background: teal; }
span.white-background { background: white; }
span.yellow-background { background: yellow; }

span.big { font-size: 2em; }
span.small { font-size: 0.6em; }

span.underline { text-decoration: underline; }
span.overline { text-decoration: overline; }
span.line-through { text-decoration: line-through; }

div.unbreakable { page-break-inside: avoid; }


/*
 * xhtml11 specific
 *
 * */

tt {
  font-family: "Courier New", Courier, monospace;
  font-size: inherit;
  color: navy;
}

div.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.tableblock > table {
  border: 3px solid #527bbd;
}
thead, p.table.header {
  font-weight: bold;
  color: #527bbd;
}
p.table {
  margin-top: 0;
}
/* Because the table frame attribute is overriden by CSS in most browsers. */
div.tableblock > table[frame="void"] {
  border-style: none;
}
div.tableblock > table[frame="hsides"] {
  border-left-style: none;
  border-right-style: none;
}
div.tableblock > table[frame="vsides"] {
  border-top-style: none;
  border-bottom-style: none;
}


/*
 * html5 specific
 *
 * */

.monospaced {
  font-family: "Courier New", Courier, monospace;
  font-size: inherit;
  color: navy;
}

table.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
thead, p.tableblock.header {
  font-weight: bold;
  color: #527bbd;
}
p.tableblock {
  margin-top: 0;
}
table.tableblock {
  border-width: 3px;
  border-spacing: 0px;
  border-style: solid;
  border-color: #527bbd;
  border-collapse: collapse;
}
th.tableblock, td.tableblock {
  border-width: 1px;
  padding: 4px;
  border-style: solid;
  border-color: #527bbd;
}

table.tableblock.frame-topbot {
  border-left-style: hidden;
  border-right-style: hidden;
}
table.tableblock.frame-sides {
  border-top-style: hidden;
  border-bottom-style: hidden;
}
table.tableblock.frame-none {
  border-style: hidden;
}

th.tableblock.halign-left, td.tableblock.halign-left {
  text-align: left;
}
th.tableblock.halign-center, td.tableblock.halign-center {
  text-align: center;
}
th.tableblock.halign-right, td.tableblock.halign-right {
  text-align: right;
}

th.tableblock.valign-top, td.tableblock.valign-top {
  vertical-align: top;
}
th.tableblock.valign-middle, td.tableblock.valign-middle {
  vertical-align: middle;
}
th.tableblock.valign-bottom, td.tableblock.valign-bottom {
  vertical-align: bottom;
}


/*
 * manpage specific
 *
 * */

body.manpage h1 {
  padding-top: 0.5em;
  padding-bottom: 0.5em;
  border-top: 2px solid silver;
  border-bottom: 2px solid silver;
}
body.manpage h2 {
  border-style: none;
}
body.manpage div.sectionbody {
  margin-left: 3em;
}

@media print {
  body.manpage div#toc { display: none; }
}
</style>
<script type="text/javascript">
/*<![CDATA[*/
var asciidoc = {  // Namespace.

/////////////////////////////////////////////////////////////////////
// Table Of Contents generator
/////////////////////////////////////////////////////////////////////

/* Author: Mihai Bazon, September 2002
 * http://students.infoiasi.ro/~mishoo
 *
 * Table Of Content generator
 * Version: 0.4
 *
 * Feel free to use this script under the terms of the GNU General Public
 * License, as long as you do not remove or alter this notice.
 */

 /* modified by Troy D. Hanson, September 2006. License: GPL */
 /* modified by Stuart Rackham, 2006, 2009. License: GPL */

// toclevels = 1..4.
toc: function (toclevels) {

  function getText(el) {
    var text = "";
    for (var i = el.firstChild; i != null; i = i.nextSibling) {
      if (i.nodeType == 3 /* Node.TEXT_NODE */) // IE doesn't speak constants.
        text += i.data;
      else if (i.firstChild != null)
        text += getText(i);
    }
    return text;
  }

  function TocEntry(el, text, toclevel) {
    this.element = el;
    this.text = text;
    this.toclevel = toclevel;
  }

  function tocEntries(el, toclevels) {
    var result = new Array;
    var re = new RegExp('[hH]([1-'+(toclevels+1)+'])');
    // Function that scans the DOM tree for header elements (the DOM2
    // nodeIterator API would be a better technique but not supported by all
    // browsers).
    var iterate = function (el) {
      for (var i = el.firstChild; i != null; i = i.nextSibling) {
        if (i.nodeType == 1 /* Node.ELEMENT_NODE */) {
          var mo = re.exec(i.tagName);
          if (mo && (i.getAttribute("class") || i.getAttribute("className")) != "float") {
            result[result.length] = new TocEntry(i, getText(i), mo[1]-1);
          }
          iterate(i);
        }
      }
    }
    iterate(el);
    return result;
  }

  var toc = document.getElementById("toc");
  if (!toc) {
    return;
  }

  // Delete existing TOC entries in case we're reloading the TOC.
  var tocEntriesToRemove = [];
  var i;
  for (i = 0; i < toc.childNodes.length; i++) {
    var entry = toc.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div'
     && entry.getAttribute("class")
     && entry.getAttribute("class").match(/^toclevel/))
      tocEntriesToRemove.push(entry);
  }
  for (i = 0; i < tocEntriesToRemove.length; i++) {
    toc.removeChild(tocEntriesToRemove[i]);
  }

  // Rebuild TOC entries.
  var entries = tocEntries(document.getElementById("content"), toclevels);
  for (var i = 0; i < entries.length; ++i) {
    var entry = entries[i];
    if (entry.element.id == "")
      entry.element.id = "_toc_" + i;
    var a = document.createElement("a");
    a.href = "#" + entry.element.id;
    a.appendChild(document.createTextNode(entry.text));
    var div = document.createElement("div");
    div.appendChild(a);
    div.className = "toclevel" + entry.toclevel;
    toc.appendChild(div);
  }
  if (entries.length == 0)
    toc.parentNode.removeChild(toc);
},


/////////////////////////////////////////////////////////////////////
// Footnotes generator
/////////////////////////////////////////////////////////////////////

/* Based on footnote generation code from:
 * http://www.brandspankingnew.net/archive/2005/07/format_footnote.html
 */

footnotes: function () {
  // Delete existing footnote entries in case we're reloading the footnodes.
  var i;
  var noteholder = document.getElementById("footnotes");
  if (!noteholder) {
    return;
  }
  var entriesToRemove = [];
  for (i = 0; i < noteholder.childNodes.length; i++) {
    var entry = noteholder.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div' && entry.getAttribute("class") == "footnote")
      entriesToRemove.push(entry);
  }
  for (i = 0; i < entriesToRemove.length; i++) {
    noteholder.removeChild(entriesToRemove[i]);
  }

  // Rebuild footnote entries.
  var cont = document.getElementById("content");
  var spans = cont.getElementsByTagName("span");
  var refs = {};
  var n = 0;
  for (i=0; i<spans.length; i++) {
    if (spans[i].className == "footnote") {
      n++;
      var note = spans[i].getAttribute("data-note");
      if (!note) {
        // Use [\s\S] in place of . so multi-line matches work.
        // Because JavaScript has no s (dotall) regex flag.
        note = spans[i].innerHTML.match(/\s*\[([\s\S]*)]\s*/)[1];
        spans[i].innerHTML =
          "[<a id='_footnoteref_" + n + "' href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
        spans[i].setAttribute("data-note", note);
      }
      noteholder.innerHTML +=
        "<div class='footnote' id='_footnote_" + n + "'>" +
        "<a href='#_footnoteref_" + n + "' title='Return to text'>" +
        n + "</a>. " + note + "</div>";
      var id =spans[i].getAttribute("id");
      if (id != null) refs["#"+id] = n;
    }
  }
  if (n == 0)
    noteholder.parentNode.removeChild(noteholder);
  else {
    // Process footnoterefs.
    for (i=0; i<spans.length; i++) {
      if (spans[i].className == "footnoteref") {
        var href = spans[i].getElementsByTagName("a")[0].getAttribute("href");
        href = href.match(/#.*/)[0];  // Because IE return full URL.
        n = refs[href];
        spans[i].innerHTML =
          "[<a href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
      }
    }
  }
},

install: function(toclevels) {
  var timerId;

  function reinstall() {
    asciidoc.footnotes();
    if (toclevels) {
      asciidoc.toc(toclevels);
    }
  }

  function reinstallAndRemoveTimer() {
    clearInterval(timerId);
    reinstall();
  }

  timerId = setInterval(reinstall, 500);
  if (document.addEventListener)
    document.addEventListener("DOMContentLoaded", reinstallAndRemoveTimer, false);
  else
    window.onload = reinstallAndRemoveTimer;
}

}
asciidoc.install();
/*]]>*/
</script>
</head>
<body class="article">
<div id="header">
</div>
<div id="content">
<div class="sect1">
<h2 id="ch03_bitcoin_client">O Cliente Bitcoin</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_bitcoin_core_a_implementação_de_referência">Bitcoin Core: A Implementação de Referência</h3>
<div class="paragraph"><p>Você pode fazer o download do <em>Bitcoin Core</em>, o cliente de referência do bitcoin, também conhecido como o "cliente Satoshi", a partir de <a href="http://www.bitcoin.org">http://www.bitcoin.org</a>. O cliente de referência implementa todos os aspectos do sistema bitcoin, incluindo carteiras, mecanismo de verificação de transações com uma cópia completa de toda a blockchain (o ledger de transações), e um nó completo da rede na rede ponto-a-ponto do bitcoin.</p></div>
<div class="paragraph"><p>Em <a href="http://bitcoin.org/en/choose-your-wallet">Bitcoin&#8217;s Choose Your Wallet page</a>, selecione Bitcoin Core para baixar o cliente de referência. Dependendo do seu sistema operacional, você irá fazer o download de um instalador executável. Para o Windows, ele um arquivo ZIP ou um executável .exe. Para Mac OS, ele é um arquivo de imagem de disco .dmg. As versões do Linux incluem um pacote PPA para Ubuntu ou um arquivo tar.gz. A página bitcoin.org que lista os clientes bitcoins recomendados é mostrada em <a href="#bitcoin-choose-client">[bitcoin-choose-client]</a>.</p></div>
<div class="imageblock" id="bitcoin-choose-client">
<div class="content">
<img src="images/msbt_0301.png" alt="bitcoin choose client" />
</div>
<div class="title">Figure 1. Escolhendo um cliente bitcoin em bitcoin.org</div>
</div>
<div class="sect3">
<h4 id="_executando_o_bitcoin_core_pela_primeira_vez">Executando o Bitcoin Core pela Primeira Vez</h4>
<div class="paragraph"><p>Se você baixar um pacote de instalação, como um .exe, .dmg ou PPA, você pode instalá-lo da mesma maneira que qualquer aplicativo em seu sistema operacional. Para Windows, execute o .exe e siga a instalação passo-a-passo. Para Mac OS, execute o .dmg e arraste o ícone Bitcoin-QT para sua pasta <em>Aplicativos</em>. Para Ubuntu, clique duas vezes sobre o PPA em seu Explorador de Arquivos e ele irá abrir o gerenciador de pacotes para instalar o pacote. Uma vez que instalação estiver completa, você terá um novo aplicativo chamado Bitcoin-Qt em sua lista de aplicativos. Dê um duplo clique nesse ícone para iniciar o cliente bitcoin.</p></div>
<div class="paragraph"><p>Na primeira vez que você executa do Bitcoin Core, ele iniciará o download da Blockchain em um processo que pode demorar vários dias (veja <a href="#bitcoin-qt-firstload">[bitcoin-qt-firstload]</a>). Deixe ele executando em segundo plano até que ele exiba "Sincronizado" e não mais exiba "Fora de Sincronia" próximo ao valor do saldo.</p></div>
<div class="imageblock" id="Bitcoin-qt-Firstload">
<div class="content">
<img src="images/msbt_0302.png" alt="bitcoin-qt first run" />
</div>
<div class="title">Figure 2. A tela do Bitcoin Core durante a inicialização da blockchain</div>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph"><p>O Bitcoin Core mantém uma cópia completa do registro de transações (a blockchain), que contém cada transação que já ocorreu na rede bitcoin desde seu início em 2009.  Esse conjunto de dados tem vários gigabytes de tamanho (cerca de 34 GB em maio de 2015) e seu download é feito de maneira incremental ao longo de vários dias. O cliente não poderá processar transações ou atualizar o saldo da conta a menos que a blockchain completa seja baixada. Durante esse tempo, o cliente irá exibir o texto "não sincronizado" próximo ao saldo da conta e mostrará "Sincronizando" no rodapé.  Certifique-se de que você tenha espaço em disco, conexão rápida à internet e tempo suficientes para completar a sincronização inicial.</p></div>
</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="_compilando_o_bitcoin_core_a_partir_do_código_fonte">Compilando o Bitcoin Core a partir do Código-Fonte</h4>
<div class="paragraph"><p>Para desenvolvedores, ainda há a opção de baixar o código-fonte completo como um arquivo ZIP ou clonar a fonte oficial do repositório do GitHub.   Em <a href="https://github.com/bitcoin/bitcoin">GitHub bitcoin page</a>, selecione Download ZIP na barra lateral. Você também pode usar a linha de comando git para criar uma cópia local do código fonte em seu sistema. No exemplo a seguir, nós estamo clonando o código fonte de uma linha de comando do tipo Unix, em Linux ou MaC OS:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>$ git clone https://github.com/bitcoin/bitcoin.git
Clonando para 'bitcoin'...
remote: Contando objetos: 31864, concluído.
remote: Comprimindo objetos: 100% (12007/12007), concluído.
remote: Total 31864 (delta 24480), re-utilizados 26530 (delta 19621)
Recebendo objetos: 100% (31864/31864), 18.47 MiB | 119 KiB/s, concluído.
Resolvendo deltas: 100% (24480/24480), concluído.
$</tt></pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph"><p>As instruções e o output resultante podem variar de versão para versão. Siga os passos da documentação que acompanha o código mesmo que eles sejam diferentes das instruções que você vê aqui, e não se surpreenda se o output exibido em sua tela seja levemente diferente dos exemplos desse livro.</p></div>
</td>
</tr></table>
</div>
<div class="paragraph"><p>Quando a operação de git clone completar, você terá uma cópia local completa do repositório do código-conte na sua pasta <em>bitcoin</em>. Modifique essa pasta ao digitar <tt>cd bitcoin</tt> no prompt:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>$ cd bitcoin</tt></pre>
</div></div>
<div class="paragraph"><p>Por padrão, a cópia local será sincronizada com o código mais recente, que pode ser uma versão beta ou instável do bitcoin. Antes de compilar o código, selecione a versão específica ao checar uma <em>tag</em> de lançamento . Isso irá sincronizar a cópia local com um snapshot específico do respositório do código identificado por uma tag palavra-chave. As tags são usadas pelos desenvolvedores para marcar lançamentos específicos do código através de um número de versão. Primeiro, para encontrar as tags disponíveis, nós usaremos o comando <tt>git tag</tt>:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>$ git tag
v0.1.5
v0.1.6test1
v0.2.0
v0.2.10
v0.2.11
v0.2.12

[... muitas outras tags ...]

v0.8.4rc2
v0.8.5
v0.8.6
v0.8.6rc1
v0.9.0rc1</tt></pre>
</div></div>
<div class="paragraph"><p>A lista de tags exibe todas as versões do bitcoin já lançadas. Por convenção,  <em>release candidates</em>, são planejados para testes e contém o sufixo "rc". Versões estáveis que possam ser executadas em sistemas de produção não possuem sufixo. Da lista existente, selecione a versão mais recente, que até este momento era v0.10.2. Para sincronizar o código local com esta versão, use o comando <tt>git checkout</tt>.</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>$ git checkout v0.9.0rc1
Note: checking out 'v0.9.0rc1'.

HEAD is now at 15ec451... Merge pull request #3605
$</tt></pre>
</div></div>
<div class="paragraph"><p>O código-fonte inclui uma documentação, que pode ser encontrada em vários arquivos. Veja a documentação principal localizada em <em>README.md</em> na pasta bitcoin ao digitar <tt>more README.md</tt> no prompt e usando a barra de espaço para ler a próxima página. Nesse capítulo, iremos fazer o build do cliente de bitcoin na linha de comando, também conhecido como <tt>bitcoind</tt> no Linux. Veja as instruções para compilar o cliente bitcoind em linha de comando na sua plataforma ao digitar <tt>more doc/build-unix.md</tt>. Instruções alternativas para Mac OS X e Windows podem ser encontradas na pasta <em>doc</em>, como <em>build-osx.md</em> ou <em>build-msw.md</em>, respectivamente.</p></div>
<div class="paragraph"><p>Analise cuidadosamente os pré-requisitos da versão, presentes na primeira parte da documentação do mesmo. Estas são as bibliotecas que devem estar presentes em seu sistema antes que você possa iniciar a compilação do bitcoin. Se estes pré-requisitos estiverem ausentes, o processo irá falhar. Logo, você pode instalá-los e então continuar o processo de compilação de onde você parou. Assumindo que os pré-requisitos estão instalados, você inicia o processo de compilação, gerando um conjunto de scripts de construção que utilizam o script <em>autogen.sh</em>.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph"><p>O processo de build do Bitcoin Core foi modificado para usar o sistema autogen/configure/make a partir da versão 0.9. As versões mais antigas usam um Makefile simples e funcionam um pouco diferente do exemplo demonstrado a seguir. Siga as instruções para a versão que você quer compilar. O autogen/configure/make introduzido na 0.0 provavelmente será o sistema de build usado para todas as versões futuras do código e é o sistema demonstrado nos exemplos a seguir.</p></div>
</td>
</tr></table>
</div>
<div class="listingblock">
<div class="content">
<pre><tt>$ ./autogen.sh
configure.ac:12: instalando `src/build-aux/config.guess'
configure.ac:12: instalando `src/build-aux/config.sub'
configure.ac:37: instalando `src/build-aux/install-sh'
configure.ac:37: instalando `src/build-aux/missing'
src/Makefile.am: instalando `src/build-aux/depcomp'
$</tt></pre>
</div></div>
<div class="paragraph"><p>O script <em>autogen.sh</em> cria um conjunto de scripts de configuração automática que irão interrogar seu sistema a descobrir as configurações corretas e garantir que você tenha todas as bibliotecas necessárias para compilar o código. O mais importante desses é o script <tt>configure</tt> que oferece várias opções diferentes para customizar o processo de build. Digite <tt>./configure --help</tt> para ver as várias opções:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>$ ./configure --help

`configure' configura o Bitcoin Core 0.9.0 para se adaptar a muitos tipos de sistemas.

Uso: ./configure [OPÇÃO]... [VAR=VALOR]...

Para atribuir as variáveis ​​de ambiente (ex.: CC, CFLAGS...), especifique-as como
VAR=VALOR. Consulte abaixo descrições de algumas variáveis úteis.

As opções padrão estão especificadas em parênteses.

Configuração:
  -h, --help exibe essa ajuda e sai
      --help=short exibe opções específicas para esse pacote
      --help=recursive exibe a ajuda curta (short) de todos os pacotes incluídos
  -V, --version exibe as informações de versão e sai

[... muitas outras opções e variáveis são exibidas abaixo ...]

Funções opcionais:
  --disable-option-checking  ignore unrecognized --enable/--with options
  --disable-FEATURE não incluir FEATURE (mesmo que --enable-FEATURE=no)
  --enable-FEATURE[=ARG]  incluir FEATURE [ARG=yes]

[... mais opções ...]

Use essas variáveis para sobrescrever as escolhas feitas pelo `configure' ou para ajudar
a encontrar livrarias e programas com nomes/localizações não-padrões.

Informe bugs para &lt;info@bitcoin.org&gt;.

$</tt></pre>
</div></div>
<div class="paragraph"><p>O script <tt>configure</tt> permite que você habilite ou desabilite certas funções do bitcoind através do uso das flags <tt>--enable-FEATURE</tt> e <tt>--disable-FEATURE</tt>, onde <tt>FEATURE</tt> é substituída pelo nome de uma função, como listado no output do help. Nesse capítulo, nós iremos construir o cliente bitocind com todas as funções padrões. Nós não iremos usar as flags de configurações, mas você deveria revisá-las para entender quais funções opcionais fazem parte do cliente. A seguir, rode o script <tt>configure</tt> para automaticamente descobrir todas as bibliotecas necessárias e criar um script de build customizado para o seu sistema:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>$ ./configure
checking build system type... x86_64-unknown-linux-gnu
checking host system type... x86_64-unknown-linux-gnu
checking for a BSD-compatible install... /usr/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /bin/mkdir -p
checking for gawk... no
checking for mawk... mawk
checking whether make sets $(MAKE)... yes

[... muitos outros recursos do sistema são testados ...]

configure: creating ./config.status
config.status: creating Makefile
config.status: creating src/Makefile
config.status: creating src/test/Makefile
config.status: creating src/qt/Makefile
config.status: creating src/qt/test/Makefile
config.status: creating share/setup.nsi
config.status: creating share/qt/Info.plist
config.status: creating qa/pull-tester/run-bitcoind-for-test.sh
config.status: creating qa/pull-tester/build-tests.sh
config.status: creating src/bitcoin-config.h
config.status: executing depfiles commands
$</tt></pre>
</div></div>
<div class="paragraph"><p>Se tudo der certo, o comando <tt>configure</tt> terminará criando os scripts de build customizados que nos permitirão compilar o bitcoind. Se houver qualquer livrarias faltando ou erros, o comando <tt>configure</tt> irá terminar com um erro ao invés de criar os script de build. Se um erro ocorrer, mais provavelmente será devido a uma biblioteca faltando ou incompatível. Revise a documentação do build novamente e certifique-se que você instalou os pré-requisitos que estão em falta. Então execute o <tt>configure</tt> novamente e veja se isso corrige o erro. Em seguida, você irá compilar o código fonte, um processo que pode levar até uma hora para ser completado. Durante o processo de compilação você deverá ver um output a cada poucos segundos ou minutos, ou um erro se algo der errado. O processo de compilação pode ser reiniciado a qualquer momento se for interrompido. Digite <tt>make</tt> para iniciar a compilação:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>$ make
Making all in src
make[1]: Entering directory `/home/ubuntu/bitcoin/src'
make  all-recursive
make[2]: Entering directory `/home/ubuntu/bitcoin/src'
Making all in .
make[3]: Entering directory `/home/ubuntu/bitcoin/src'
  CXX addrman.o
  CXX alert.o
  CXX rpcserver.o
  CXX bloom.o
  CXX chainparams.o

[... muitas outras mensagens de compilação ...]

  CXX test_bitcoin-wallet_tests.o
  CXX test_bitcoin-rpc_wallet_tests.o
  CXXLD test_bitcoin
make[4]: Leaving directory `/home/ubuntu/bitcoin/src/test'
make[3]: Leaving directory `/home/ubuntu/bitcoin/src/test'
make[2]: Leaving directory `/home/ubuntu/bitcoin/src'
make[1]: Leaving directory `/home/ubuntu/bitcoin/src'
make[1]: Entering directory `/home/ubuntu/bitcoin'
make[1]: Nothing to be done for `all-am'.
make[1]: Leaving directory `/home/ubuntu/bitcoin'
$</tt></pre>
</div></div>
<div class="paragraph"><p>Se tudo ocorrer dentro do esperado, o bitcoind agora está compilado. O passo final é instalar o executável do bitcoind no caminho do sistema usando o comando <tt>make</tt>:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>$ sudo make install
Making install in src
Making install in .
 /bin/mkdir -p '/usr/local/bin'
  /usr/bin/install -c bitcoind bitcoin-cli '/usr/local/bin'
Making install in test
make install-am
 /bin/mkdir -p '/usr/local/bin'
  /usr/bin/install -c test_bitcoin '/usr/local/bin'
$</tt></pre>
</div></div>
<div class="paragraph"><p>Você pode confirmar que o bitcoin está corretamente instalado ao perguntar ao sistema pelo caminho dos dois executáveis, como demonstrado a seguir:</p></div>
<div class="listingblock">
<div class="content"></div></div>
<div class="paragraph"><p>A instalação padrão do bitcoind o salva em <em>/usr/local/bin</em>. Quando você rodar o bitcoind pela primeira vez, ele irá lembrá-lo para criar um arquivo de configuração com uma senha forte para a interface JSON-RPC. Execute o bitcoind ao digitar <tt>bitcoind</tt> no terminal:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>$ bitcoind
Erro: Para usar a opção "-server", você precisa definir uma rpcpassword no arquivo de configuração:
/home/ubuntu/.bitcoin/bitcoin.conf
É recomendado que você use a seguinte senha aleatória:
rpcuser=bitcoinrpc
rpcpassword=2XA4DuKNCbtZXsBQRRNDEwEY2nM6M4H9Tx5dFjoAVVbK
(você não precisa se lembrar dessa senha)
O usuário e senha NÃO DEVEM ser iguais.
Se o arquivo não existir, crie um com permissões de arquivo owner-somente leitura
Também recomenda-se definir um alertnotify, para que você seja notificado sobre problemas;
por exemplo: alertnotify=echo %s | mail -s "Alerta Bitcoin" admin@foo.com</tt></pre>
</div></div>
<div class="paragraph"><p>Edite o arquivo de configuração em seu editor de preferência e defina os parâmetros, substituindo a senha por uma senha forte como recomendado pelo bitcoind. <em>Não</em> use a senha mostrada aqui. Crie um arquivo no interior da pasta <em>.bitcoin</em> de maneira que ela fique nomeada como <em>.bitcoin/bitcoin.conf</em> e insira um usuário e senha:</p></div>
<div class="listingblock">
<div class="content"></div></div>
<div class="paragraph"><p>Enquanto você estiver editando esse arquivo de configuração, você pode querer definir algumas outras opções, como a <tt>txindex</tt> (ver <a href="#txindex">[txindex]</a>). Para uma listagem completa das opções disponíveis, digite <tt>bitcoind --help</tt>.</p></div>
<div class="paragraph"><p>Agora, execute o cliente Bitcoin Core. Ao ser executado pela primeira vez, ele irá reconstruir a blockchain do bitcoin ao fazer o download de todos os blocos. Ela é um arquivo de vários gigabytes e levará em média dois dias para ser completamente baixada. Você pode diminuir o tempo de inicialização da blockchain ao fazer o download de uma cópia parcial dela usando um cliente BitTorrent a partir de <a href="http://bit.ly/1cqdPl6">SourceForge</a>.</p></div>
<div class="paragraph"><p>Execute o bitcoind em segundo plano com a opção <tt>-daemon</tt>:range="endofrange"</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>$ bitcoind -daemon

Bitcoin version v0.9.0rc1-beta (2014-01-31 09:30:15 +0100) _(N.T. A versão será diferente de acordo com a versão baixada no GitHub)_
Using OpenSSL version OpenSSL 1.0.1c 10 May 2012
Default data directory /home/bitcoin/.bitcoin
Using data directory /bitcoin/
Using at most 4 connections (1024 file descriptors available)
init message: Verifying wallet...
dbenv.open LogDir=/bitcoin/database ErrorFile=/bitcoin/db.log
Bound to [::]:8333
Bound to 0.0.0.0:8333
init message: Loading block index...
Opening LevelDB in /bitcoin/blocks/index
Opened LevelDB successfully
Opening LevelDB in /bitcoin/chainstate
Opened LevelDB successfully

[... mais mensagens de inicialização ...]</tt></pre>
</div></div>
</div>
</div>
<div class="sect2">
<h3 id="_usando_a_api_json_rpc_do_bitcoin_core_a_partir_da_linha_de_comando">Usando a API JSON-RPC do Bitcoin Core a partir da Linha de Comando</h3>
<div class="paragraph"><p>O cliente Bitcoin Core implementa uma interface JSON-RPC que também pode ser acessada ao se utilizar o ajudante da linha de comando <tt>bitcoin-cli</tt>. A linha de comando nos permite experimentar interativamente com as capacidades que também estão disponíveis programaticamente através da API. Para iniciar, invoque o comando <tt>help</tt> para ver uma lista dos comandos bitcoin RPC disponíveis:</p></div>
<div class="listingblock" id="bitcoind_commands">
<div class="content">
<pre><tt>$ bitcoin-cli help
addmultisigaddress nrequired ["key",...] ( "account" )
addnode "node" "add|remove|onetry"
backupwallet "destination"
createmultisig nrequired ["key",...]
createrawtransaction [{"txid":"id","vout":n},...] {"address":amount,...}
decoderawtransaction "hexstring"
decodescript "hex"
dumpprivkey "bitcoinaddress"
dumpwallet "filename"
getaccount "bitcoinaddress"
getaccountaddress "account"
getaddednodeinfo dns ( "node" )
getaddressesbyaccount "account"
getbalance ( "account" minconf )
getbestblockhash
getblock "hash" ( verbose )
getblockchaininfo
getblockcount
getblockhash index
getblocktemplate ( "jsonrequestobject" )
getconnectioncount
getdifficulty
getgenerate
gethashespersec
getinfo
getmininginfo
getnettotals
getnetworkhashps ( blocks height )
getnetworkinfo
getnewaddress ( "account" )
getpeerinfo
getrawchangeaddress
getrawmempool ( verbose )
getrawtransaction "txid" ( verbose )
getreceivedbyaccount "account" ( minconf )
getreceivedbyaddress "bitcoinaddress" ( minconf )
gettransaction "txid"
gettxout "txid" n ( includemempool )
gettxoutsetinfo
getunconfirmedbalance
getwalletinfo
getwork ( "data" )
help ( "command" )
importprivkey "bitcoinprivkey" ( "label" rescan )
importwallet "filename"
keypoolrefill ( newsize )
listaccounts ( minconf )
listaddressgroupings
listlockunspent
listreceivedbyaccount ( minconf includeempty )
listreceivedbyaddress ( minconf includeempty )
listsinceblock ( "blockhash" target-confirmations )
listtransactions ( "account" count from )
listunspent ( minconf maxconf  ["address",...] )
lockunspent unlock [{"txid":"txid","vout":n},...]
move "fromaccount" "toaccount" amount ( minconf "comment" )
ping
sendfrom "fromaccount" "tobitcoinaddress" amount ( minconf "comment" "comment-to" )
sendmany "fromaccount" {"address":amount,...} ( minconf "comment" )
sendrawtransaction "hexstring" ( allowhighfees )
sendtoaddress "bitcoinaddress" amount ( "comment" "comment-to" )
setaccount "bitcoinaddress" "account"
setgenerate generate ( genproclimit )
settxfee amount
signmessage "bitcoinaddress" "message"
signrawtransaction "hexstring" ( [{"txid":"id","vout":n,"scriptPubKey":"hex","redeemScript":"hex"},...] ["privatekey1",...] sighashtype )
stop
submitblock "hexdata" ( "jsonparametersobject" )
validateaddress "bitcoinaddress"
verifychain ( checklevel numblocks )
verifymessage "bitcoinaddress" "signature" "message"
walletlock
walletpassphrase "passphrase" timeout
walletpassphrasechange "oldpassphrase" "newpassphrase"</tt></pre>
</div></div>
<div class="sect3">
<h4 id="_obtendo_informações_do_status_do_cliente_bitcoin_core">Obtendo Informações do Status do Cliente Bitcoin Core</h4>
<div class="paragraph"><p>Comandos: <tt>getinfo</tt></p></div>
<div class="paragraph"><p>O comando RPC <tt>getinfo</tt> do Bitcoin exibe informações básicas sobre o estado do nó da rede bitcoin, da carteira e do banco de dados da blockchain. Use <tt>bitcoin-cli</tt> para rodá-lo:</p></div>
<div class="listingblock">
<div class="content"></div></div>
<div class="listingblock">
<div class="content"></div></div>
<div class="paragraph"><p>Os dados retornam em JavaScript Object Notation (JSON), um formato que pode ser facilmente "consumido" por todas as linguagens de programação mas que também é bastante fácil de ler por uma pessoa. Entre esses dados nós vemos os números de versão do cliente de software (90000), protocolo (70002) e carteira (60000) bitcoin. Nós vemos o saldo atual contido na carteira, que é zero. Nós vemos a altura atual do bloco, nos mostrando quantos blocos esse cliente conhece (286216). Nós também vemos várias estatísticas sobre a rede bitcoin e as configurações relacionadas a esse cliente. Nós iremos explorar essas configurações em mais detalhes no resto desse capítulo.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph"><p>Levará algum tempo, talvez mais de um dia, para o cliente bitcoind "alcançar" a altura da blockchain atual ao baixar os blocos de outros clientes bitcoin. Você pode verificar o seu progresso usando <tt>getinfo</tt> para ver o número de blocos conhecidos.</p></div>
</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="_configuração_e_criptografia_da_carteira">Configuração e Criptografia da Carteira</h4>
<div class="paragraph"><p>Comandos: <tt>encryptwallet</tt>, <tt>walletpassphrase</tt></p></div>
<div class="paragraph"><p>Antes de você proceder com a criação de chaves e outros comandos, você deve primeiro criptografar a carteira com uma chave. Para esse exemplo, você irá utilizar o comando <tt>encryptwallet</tt> com a senha "foo". Obviamente, substitua "foo" por uma senha forte e complexa!</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>$ bitcoin-cli encryptwallet foo
carteira criptografada; Parando servidor bitccoin, reinicie para rodar com carteira criptografada. A pool de chaves foi liberada, você precisa fazer um novo backup.
$</tt></pre>
</div></div>
<div class="paragraph"><p>Você pode verificar se a carteira foi criptografada ao executar <tt>getinfo</tt> novamente. Dessa vez você irá perceber uma nova entrada chamada <tt>unlocked_until</tt>. Ela é um contador mostrando por quanto tempo a senha de descriptografia da carteira será armazenada na memória, mantendo a carteira desbloqueada. Inicialmente ela será definida como zero, significando que a carteira está bloqueada:</p></div>
<div class="listingblock">
<div class="content"></div></div>
<div class="listingblock">
<div class="content"></div></div>
<div class="paragraph"><p>Para desbloquear a carteira, use o comando <tt>walletpassphrase</tt>, que carrega dois parâmetros—a senha e o número de segundos até que a carteira seja bloqueada novamente de maneira automático (um timer regressivo):</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>$ bitcoin-cli walletpassphrase foo 360
$</tt></pre>
</div></div>
<div class="paragraph"><p>Você pode confirmar que a carteira está desbloqueada e ver o tempo restante ao executar <tt>getinfo</tt> novamente:</p></div>
<div class="listingblock">
<div class="content"></div></div>
<div class="listingblock">
<div class="content"></div></div>
</div>
<div class="sect3">
<h4 id="_backup_da_carteira_dump_em_texto_puro_e_restauração">Backup da Carteira, Dump em texto-puro e Restauração</h4>
<div class="paragraph"><p>Comandos: <tt>backupwallet</tt>, <tt>importwallet</tt>, <tt>dumpwallet</tt></p></div>
<div class="paragraph"><p>A seguir nós iremos criar um arquivo de backup da carteira e restauraremos a carteira a partir desse arquivo. Use o comando <tt>backupwallet</tt> para fazer o backup, fornecendo o nome do arquivo como parâmetro. Aqui nós iremos fazer backup da carteira para o arquivo <em>wallet.backup</em>:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>$ bitcoin-cli backupwallet wallet.backup
$</tt></pre>
</div></div>
<div class="paragraph"><p>Agora, para recuperar o arquivo de backup, utilize o comando <tt>importwallet</tt>. Se sua carteira estiver bloqueada, você precisará desbloquea-la antes (ver <tt>walletpassphrase</tt> na seção anterior) para importar o arquivo de backup:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>$ bitcoin-cli importwallet wallet.backup
$</tt></pre>
</div></div>
<div class="paragraph"><p>O comando <tt>dumpwallet</tt> pode ser usado para fazer um dump da carteira em um arquivo de texto de leitura fácil:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>$ bitcoin-cli dumpwallet wallet.txt
$ more wallet.txt
# Dump da carteira criado por Bitcoin v0.9.0rc1-beta (2014-01-31 09:30:15 +0100)
# * Criado em 2014-02- 8dT20:34:55Z
# * O melhor bloco na época do backup era 286234 (0000000000000000f74f0bc9d3c186267bc45c7b91c49a0386538ac24c0d3a44),
# minerado em 2014-02- 8dT20:24:01Z

KzTg2wn6Z8s7ai5NA9MVX4vstHRsqP26QKJCzLg4JvFrp6mMaGB9 2013-07- 4dT04:30:27Z change=1 # addr=16pJ6XkwSQv5ma5FSXMRPaXEYrENCEg47F
Kz3dVz7R6mUpXzdZy4gJEVZxXJwA15f198eVui4CUivXotzLBDKY 2013-07- 4dT04:30:27Z change=1 # addr=17oJds8kaN8LP8kuAkWTco6ZM7BGXFC3gk
[... muitas outras chaves ...]

$</tt></pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_endereços_da_carteira_e_recebendo_transações">Endereços da Carteira e Recebendo Transações</h4>
<div class="paragraph"><p>Comandos: getnewaddress, getreceivedbyaddress, listtransactions, getaddressesbyaccount, getbalance</p></div>
<div class="paragraph"><p>O cliente referência do bitcoin mantém um pool de endereços, o tamanho do qual é exibido através do <tt>keypoolsize</tt> quando você usa o comando <tt>getinfo</tt>. Esses endereços são gerados automaticamente e podem ser utilizados como endereços públicos para receber pagamentos ou como endereços de troco. Para gerar um desses endereços, use o comando <tt>getnewaddress</tt>:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>$ bitcoin-cli getnewaddress
1hvzSofGwT8cjb8JU7nBsCSfEVQX5u9CL</tt></pre>
</div></div>
<div class="paragraph"><p>Agora nós podemos usar esse endereço para enviar uma pequena quantidade de bitcoins para nossa carteira bitcoind a partir de uma carteira externa (assumindo que você tem alguns bitcoins em uma exchange, carteira web ou outra carteira bitcoind em outro lugar). Para esse exemplo, nós enviaremos 50 milibits (0,050 bitcoin) para o endereço anterior.</p></div>
<div class="paragraph"><p>Agora nós podemos requisitar o cliente bitcoind para a quantia recebida por esse endereço, e especificar quantas confirmações são necessárias antes que uma quantia seja contabilizada no saldo. Para esse exemplo, nós iremos especificar zero confirmações. Alguns segundos após enviar o bitcoin de outra carteira, nós iremos ver isso refletido na carteira. Nós usamos <tt>getreceivedbyaddress</tt> com o endereço e o número de confirmações definido para zero (0):</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>$ bitcoin-cli getreceivedbyaddress 1hvzSofGwT8cjb8JU7nBsCSfEVQX5u9CL 0
0.05000000</tt></pre>
</div></div>
<div class="paragraph"><p>Se nós omitirmos o zero do final desse comando, nós iremos ver somente as quantias que tiveram pelo menos <tt>minconf</tt> confirmações, onde <tt>minconf</tt> é o parâmetro para o número mínimo de confirmações antes que uma transação seja listada no saldo. O parâmetro <tt>minconf</tt> é especificado no arquivo de configuração do bitcoind. Como a transação enviando esse bitcoin só foi enviada nos últimos poucos segundos, ela ainda não foi confirmada e portanto nós iremos ver ele listas um saldo zero:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>$ bitcoin-cli getreceivedbyaddress 1hvzSofGwT8cjb8JU7nBsCSfEVQX5u9CL
0.00000000</tt></pre>
</div></div>
<div class="paragraph"><p>As transações recebidas pela carteira também podem ser exibidas usando o comando <tt>listtransactions</tt>:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>$ bitcoin-cli listtransactions</tt></pre>
</div></div>
<div class="listingblock">
<div class="content"></div></div>
<div class="paragraph"><p>Nós podemos listar todos os endereços contidos na carteira usando o comando <tt>getaddressesbyaccount</tt>:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>$ bitcoin-cli getaddressesbyaccount ""</tt></pre>
</div></div>
<div class="listingblock">
<div class="content"></div></div>
<div class="paragraph"><p>Finalmente, o comando <tt>getbalance</tt> mostrará o saldo total da carteira, somando todas as transações confirmadas com pelo menos <tt>minconf</tt> confirmações:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>$ bitcoin-cli getbalance
0.05000000</tt></pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph"><p>Se a transação ainda não foi confirmada, o saldo que <tt>getbalance</tt> retornará será de zero. A opção de configuração "minconf" determina o número mínimo de confirmações que são necessárias antes de uma transação aparecer no saldo.</p></div>
</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="_explorando_e_decodificando_as_transações">Explorando e Decodificando as Transações</h4>
<div class="paragraph"><p>Comandos: <tt>gettransaction</tt>, <tt>getrawtransaction</tt>, <tt>decoderawtransaction</tt></p></div>
<div class="paragraph"><p>Agora nós iremos explorar a transação que chega e que foi listada previamente usando o comando <tt>gettransaction</tt>. Nós podemos coletar a transação através de seu hash de transação, mostrado em <tt>txid</tt> anteriormente, com o comando <tt>gettransaction</tt>:</p></div>
<programlisting>
$ bitcoin-cli gettransaction 9ca8f969bd3ef5ec2a8685660fdbf7a8bd365524c2e1fc66<?pdf-cr?>c309acbae2c14ae3

</programlisting>
<div class="listingblock">
<div class="content"></div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph"><p>Os IDs de transações não são "oficiais" até que a transação tenha sido confirmada. A ausência de um hash de transação na blockchain não significa que a transação não foi processada. Isso é conhecido como "maleabilidade da transação", porque hashes de transação podem ser modificados antes da confirmação em um bloco. Após a confirmação, o txid é imutável e oficial.</p></div>
</td>
</tr></table>
</div>
<div class="paragraph"><p>A forma de transação mostrada com o comando <tt>gettransaction</tt> é a forma simplicada. Para adquirir o código de transação completo e decodificá-lo, nós iremos usar dois comandos: <tt>getrawtransaction</tt> e <tt>decoderawtransaction</tt>. Primeiro, o <tt>getrawtransaction</tt> recebe o <em>hash da transação (txid)</em> como um parâmetro e retorna a transação completa como uma string hex "raw", exatamente como ela existe na rede bitcoin:</p></div>
<programlisting>
$ bitcoin-cli getrawtransaction 9ca8f969bd3ef5ec2a8685660fdbf7a8bd365524c2e1f<?pdf-cr?>c66c309acbae2c14ae3

0100000001d717279515f88e2f56ce4e8a31e2ae3e9f00ba1d0add648e80c480ea22e0c7d3000<?pdf-cr?>000008b483045022100a4ebbeec83225dedead659bbde7da3d026c8b8e12e61a2df0dd0758e22<?pdf-cr?>7383b302203301768ef878007e9ef7c304f70ffaf1f2c975b192d34c5b9b2ac1bd193dfba2014<?pdf-cr?>104793ac8a58ea751f9710e39aad2e296cc14daa44fa59248be58ede65e4c4b884ac5b5b6dede<?pdf-cr?>05ba84727e34c8fd3ee1d6929d7a44b6e111d41cc79e05dbfe5ceaffffffff02404b4c0000000<?pdf-cr?>0001976a91407bdb518fa2e6089fd810235cf1100c9c13d1fd288ac1f312906000000001976a9<?pdf-cr?>14107b7086b31518935c8d28703d66d09b3623134388ac00000000
</programlisting>
<div class="paragraph"><p>Para decodificar essa string hex, use o comando <tt>decoderawtransaction</tt>. Copie e cole o hex como o primeiro parâmetro de <tt>decoderawtransaction</tt> para obter o conteúdo completo interpretado como uma estrutura de dados JSON (por questões de formatação a string hex é encurtada no seguinte exemplo):</p></div>
<programlisting>
$ bitcoin-cli decoderawtransaction 0100000001d717279515f88e2f56ce4e8a31e2ae3e<?pdf-cr?>9f00ba1d0add648e80c480ea22e0c7d3000000008b483045022100a4ebbeec83225dedead659b<?pdf-cr?>bde7da3d026c8b8e12e61a2df0dd0758e227383b302203301768ef878007e9ef7c304f70ffaf1<?pdf-cr?>f2c975b192d34c5b9b2ac1bd193dfba2014104793ac8a58ea751f9710e39aad2e296cc14daa44<?pdf-cr?>fa59248be58ede65e4c4b884ac5b5b6dede05ba84727e34c8fd3ee1d6929d7a44b6e111d41cc7<?pdf-cr?>9e05dbfe5ceaffffffff02404b4c00000000001976a91407bdb518fa2e6089fd810235cf1100c<?pdf-cr?>9c13d1fd288ac1f312906000000001976a914107b7086b31518935c8d28703d66d09b36231343<?pdf-cr?>88ac00000000
</programlisting>
<screen>
{
    "txid" : "9ca8f969bd3ef5ec2a8685660fdbf7a8bd365524c2e1fc66c309acbae2c14ae3",
    "version" : 1,
    "locktime" : 0,
    "vin" : [
        {
            "txid" : "d3c7e022ea80c4808e64dd0a1dba009f3eaee2318a4ece562f8ef815<?pdf-cr?>952717d7",
            "vout" : 0,
            "scriptSig" : {
                "asm" : "3045022100a4ebbeec83225dedead659bbde7da3d026c8b8e12e<?pdf-cr?>61a2df0dd0758e227383b302203301768ef878007e9ef7c304f70ffaf1f2c975b192d34c5b9b2<?pdf-cr?>ac1bd193dfba20104793ac8a58ea751f9710e39aad2e296cc14daa44fa59248be58ede65e4c4b<?pdf-cr?>884ac5b5b6dede05ba84727e34c8fd3ee1d6929d7a44b6e111d41cc79e05dbfe5cea",
                "hex": "483045022100a4ebbeec83225dedead659bbde7da3d026c8b8e1<?pdf-cr?>2e61a2df0dd0758e227383b302203301768ef878007e9ef7c304f70ffaf1f2c975b192d34c5b9<?pdf-cr?>b2ac1bd193dfba2014104793ac8a58ea751f9710e39aad2e296cc14daa44fa59248be58ede65e<?pdf-cr?>4c4b884ac5b5b6dede05ba84727e34c8fd3ee1d6929d7a44b6e111d41cc79e05dbfe5cea"
            },
            "sequence" : 4294967295
        }
    ],
    "vout" : [
        {
            "value" : 0.05000000,
            "n" : 0,
            "scriptPubKey" : {
                "asm" : "OP_DUP OP_HASH160 07bdb518fa2e6089fd810235cf1100c9c<?pdf-cr?>13d1fd2 OP_EQUALVERIFY OP_CHECKSIG",
                "hex" : "76a91407bdb518fa2e6089fd810235cf1100c9c13d1fd288ac",
                "reqSigs" : 1,
                "type" : "pubkeyhash",
                "addresses" : [
                    "1hvzSofGwT8cjb8JU7nBsCSfEVQX5u9CL"
                ]
            }
        },
        {
            "value" : 1.03362847,
            "n" : 1,
            "scriptPubKey" : {
                "asm" : "OP_DUP OP_HASH160 107b7086b31518935c8d28703d66d09b36<?pdf-cr?>231343 OP_EQUALVERIFY OP_CHECKSIG",
                "hex" : "76a914107b7086b31518935c8d28703d66d09b3623134388ac",
                "reqSigs" : 1,
                "type" : "pubkeyhash",
                "addresses" : [
                    "12W9goQ3P7Waw5JH8fRVs1e2rVAKoGnvoy"
                ]
            }
        }
    ]
}
</screen>
<div class="paragraph"><p>A decodificação da transação mostra todos os componentes desta transação, incluindo os inputs e outputs da transação. Nesse caso nós vemos que a transação que creditou nosso novo endereço com 50 milibits usou um input e gerou dois outputs. O input para essa transação foi o output de uma transação previamente confirmada (mostrada como o vin txid iniciando com <tt>d3c7</tt>). Os dois outputs correspondem ao crédito de 50 milibit e a um output com o troco de volta ao remetente.</p></div>
<div class="paragraph"><p>Podemos explorar mais a fundo a blockchain ao examinarmos a transação anterior referenciada pelo seu txid nesta transação usando os mesmos comandos (ex: <tt>gettransaction</tt>). Saltando de transação em transação nós podemos seguir uma corrente de transações de volta na medida em que as moedas são transmitidas entre os endereços de seus donos.</p></div>
<div class="paragraph"><p>Assim que a transação que recebemos é confirmada ao ser incluída em um bloco, o comando <tt>gettransaction</tt> irá retornar informações adicionais, mostrando o <em>hash do bloco (identificador)</em> no qual a transação foi incluída:</p></div>
<screen>
$ bitcoin-cli gettransaction 9ca8f969bd3ef5ec2a8685660fdbf7a8bd365524c2e1fc66<?pdf-cr?>c309acbae2c14ae3
</screen>
<screen>
{
    "amount" : 0.05000000,
    "confirmations" : 1,
    "blockhash" : "000000000000000051d2e759c63a26e247f185ecb7926ed7a6624bc31c<?pdf-cr?>2a717b",
    "blockindex" : 18,
    "blocktime" : 1392660808,
    "txid" : "9ca8f969bd3ef5ec2a8685660fdbf7a8bd365524c2e1fc66c309acbae2c14ae3",
    "time" : 1392660908,
    "timereceived" : 1392660908,
    "details" : [
        {
            "account" : "",
            "address" : "1hvzSofGwT8cjb8JU7nBsCSfEVQX5u9CL",
            "category" : "receive",
            "amount" : 0.05000000
        }
    ]
}
</screen>
<div class="paragraph"><p>Aqui, nós vemos a nova informação nas entradas <tt>blockhash</tt> (o hash do bloco no qual a transação foi incluída), e <tt>blockindex</tt> com valor 18 (indicando que nossa transação foi a 18ª transação naquele bloco).</p></div>
<div class="sidebarblock" id="txindex">
<div class="content">
<div class="title">Índice do Banco de Dados de Transações e a Opção txindex</div>
<div class="paragraph"><p>Por padrão, o Bitcoin Core constrói um banco de dados contendo <em>apenas</em> as transações relacionadas à carteira do usuário. Se você quiser ter acesso a <em>qualquer</em> transação com comandos como <tt>gettransaction</tt>, você tem que configurar o Bitcoin Core para construir um índice completo de transações, que pode ser realizado com a opção <tt>txindex</tt>. Defina <tt>txindex=1</tt> no arquivo de configuração do Bitcoin Core (geralmente encontrado em seu diretório sob <em>.bitcoin/bitcoin.conf</em>). Assim que mudar esse parâmetro, você precisará reiniciar o bitcoind e esperar que ele reconstrua o índice. </p></div>
</div></div>
</div>
<div class="sect3">
<h4 id="_explorando_os_blocos">Explorando os Blocos</h4>
<div class="paragraph"><p>Comandos: <tt>getblock</tt>, <tt>getblockhash</tt></p></div>
<div class="paragraph"><p>Agora que nós sabemos em qual bloco nossa transação foi incluídas, nós podemos fazer uma requisição nesse bloco. Nós usaremos o comando <tt>getblock</tt> com o hash do bloco como parâmetro:</p></div>
<screen>
$ bitcoin-cli getblock 000000000000000051d2e759c63a26e247f185ecb7926ed7a6624b<?pdf-cr?>c31c2a717b true
</screen>
<screen>
{
    "hash" : "000000000000000051d2e759c63a26e247f185ecb7926ed7a6624bc31c2a717<?pdf-cr?>b",
    "confirmations" : 2,
    "size" : 248758,
    "height" : 286384,
    "version" : 2,
    "merkleroot" : "9891747e37903016c3b77c7a0ef10acf467c530de52d84735bd555387<?pdf-cr?>19f9916",
    "tx" : [
        "46e130ab3c67d31d2b2c7f8fbc1ca71604a72e6bc504c8a35f777286c6d89bf0",
        "2d5625725b66d6c1da88b80b41e8c07dc5179ae2553361c96b14bcf1ce2c3868",
        "923392fc41904894f32d7c127059bed27dbb3cfd550d87b9a2dc03824f249c80",
        "f983739510a0f75837a82bfd9c96cd72090b15fa3928efb9cce95f6884203214",
        "190e1b010d5a53161aa0733b953eb29ef1074070658aaa656f933ded1a177952",
        "ee791ec8161440262f6e9144d5702f0057cef7e5767bc043879b7c2ff3ff5277",
        "4c45449ff56582664abfadeb1907756d9bc90601d32387d9cfd4f1ef813b46be",
        "3b031ed886c6d5220b3e3a28e3261727f3b4f0b29de5f93bc2de3e97938a8a53",
        "14b533283751e34a8065952fd1cd2c954e3d37aaa69d4b183ac6483481e5497d",
        "57b28365adaff61aaf60462e917a7cc9931904258127685c18f136eeaebd5d35",
        "8c0cc19fff6b66980f90af39bee20294bc745baf32cd83199aa83a1f0cd6ca51",
        "1b408640d54a1409d66ddaf3915a9dc2e8a6227439e8d91d2f74e704ba1cdae2",
        "0568f4fad1fdeff4dc70b106b0f0ec7827642c05fe5d2295b9deba4f5c5f5168",
        "9194bfe5756c7ec04743341a3605da285752685b9c7eebb594c6ed9ec9145f86",
        "765038fc1d444c5d5db9163ba1cc74bba2b4f87dd87985342813bd24021b6faf",
        "bff1caa9c20fa4eef33877765ee0a7d599fd1962417871ca63a2486476637136",
        "d76aa89083f56fcce4d5bf7fcf20c0406abdac0375a2d3c62007f64aa80bed74",
        "e57a4c70f91c8d9ba0ff0a55987ea578affb92daaa59c76820125f31a9584dfc",
        "9ca8f969bd3ef5ec2a8685660fdbf7a8bd365524c2e1fc66c309acbae2c14ae3",

#[... muitas outras transações ...]

    ],
    "time" : 1392660808,
    "nonce" : 3888130470,
    "bits" : "19015f53",
    "difficulty" : 3129573174.52228737,
    "chainwork" : "000000000000000000000000000000000000000000001931d1658fc048<?pdf-cr?>79e466",
    "previousblockhash" : "0000000000000000177e61d5f6ba6b9450e0dade9f39c257b4<?pdf-cr?>d48b4941ac77e7",
    "nextblockhash" : "0000000000000001239d2c3bf7f4c68a4ca673e434702a57da8fe0<?pdf-cr?>d829a92eb6"

</screen>
<div class="paragraph"><p>O bloco contém 367 transações e como você pode ver, a 18ª transação listada (<tt>9ca8f9&#8230;</tt>) é o txid de um dos 50 milibits creditados em nosso endereço. A entrada <tt>altura</tt> nos informa que esse é o 286384º bloco na blockchain.</p></div>
<div class="paragraph"><p>Nós também podemos adquirir um bloco através de sua altura de bloco usando o comando <tt>getblockhash</tt>, que recebe a altura do bloco como parâmetro e retorna o hash do bloco para aquele bloco:</p></div>
<screen>
$ bitcoin-cli getblockhash 0

000000000019d6689c085ae165831e934ff763ae46a2a6c172b3f1b60a8ce26f
</screen>
<div class="paragraph"><p>Aqui, nós solicitamos o hash do bloco do "bloco gênese", o primeiro bloco minerado por Satoshi Nakamoto, na altura zero. A solicitação desse bloco mostra:</p></div>
<screen>
$ bitcoin-cli getblock 000000000019d6689c085ae165831e934ff763ae46a2a6c172b3f1<?pdf-cr?>b60a8ce26f
</screen>
<screen>
{
    "hash" : "000000000019d6689c085ae165831e934ff763ae46a2a6c172b3f1b60a8ce26<?pdf-cr?>f",
    "confirmations" : 286388,
    "size" : 285,
    "height" : 0,
    "version" : 1,
    "merkleroot" : "4a5e1e4baab89f3a32518a88c31bc87f618f76673e2cc77ab2127b7af<?pdf-cr?>deda33b",
    "tx" : [
        "4a5e1e4baab89f3a32518a88c31bc87f618f76673e2cc77ab2127b7afdeda33b"
    ],
    "time" : 1231006505,
    "nonce" : 2083236893,
    "bits" : "1d00ffff",
    "difficulty" : 1.00000000,
    "chainwork" : "0000000000000000000000000000000000000000000000000000000100<?pdf-cr?>010001",
    "nextblockhash" : "00000000839a8e6886ab5951d76f411475428afc90947ee320161b<?pdf-cr?>bf18eb6048"
}
</screen>
<div class="paragraph"><p>Os comandos  <tt>getblock</tt>, <tt>getblockhash</tt> e <tt>gettransaction</tt> podem ser usados para explorar o banco de dados da blockchain, programaticamente.</p></div>
</div>
<div class="sect3">
<h4 id="_criando_assinando_e_enviando_transações_baseadas_em_phrase_role_keep_together_outputs_não_gastos_phrase">Criando, Assinando e Enviando Transações Baseadas em <phrase role="keep-together">Outputs Não-gastos</phrase></h4>
<div class="paragraph"><p>Comandos: <tt>listunspent</tt>, <tt>gettxout</tt>, <tt>createrawtransaction</tt>, <tt>decoderawtransaction</tt>, <tt>signrawtransaction</tt>, <tt>sendrawtransaction</tt></p></div>
<div class="paragraph"><p>As transações do Bitcoin são baseadas no conceito de gastar "outputs", que são o resultado de transações prévias, para criar uma corrente de transações que transfere a posse de um endereço para outro endereço. Nossa carteira agora recebeu uma transação que designou um desses outputs para nosso endereço. Uma vez confirmada, nós podemos gastar esse output.</p></div>
<div class="paragraph"><p>Primeiro, nós utilizaremos o comando <tt>listunspent</tt> para mostrar todos os outputs <em>confirmados</em> não-gastos em nossa carteira:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>$ bitcoin-cli listunspent</tt></pre>
</div></div>
<screen>
[
    {
        "txid" : "9ca8f969bd3ef5ec2a8685660fdbf7a8bd365524c2e1fc66c309acbae2c<?pdf-cr?>14ae3",
        "vout" : 0,
        "address" : "1hvzSofGwT8cjb8JU7nBsCSfEVQX5u9CL",
        "account" : "",
        "scriptPubKey" : "76a91407bdb518fa2e6089fd810235cf1100c9c13d1fd288ac",
        "amount" : 0.05000000,
        "confirmations" : 7
    }
]
</screen>
<div class="paragraph"><p>Nós vemos que a transação <tt>9ca8f9&#8230;</tt> criou um output (com o índice vout 0) designado para o endereço <tt>1hvzSo&#8230;</tt> para a quantidade de 50 milibits, que até esse momento já recebeu sete confirmações. As transações usam outputs criados anteriormente como seus inputs ao usá-los como referência através do txid e índice vout anterior. Nós agora iremos criar uma transação que irá gastar o vout zero da txid <tt>9ca8f9&#8230;</tt> como seu input e designá-la como um novo output que envia um valor para um novo endereço.</p></div>
<div class="paragraph"><p>Primeiramente, vamos olhar ao output específico em maiores detalhes. Nós usamos <tt>gettxout</tt> para obter os detalhes desse output não-gasto. Os outputs de transação são sempre referenciados pelo txid e vout, e esses são os parâmetros que nós passamos para o <tt>gettxout</tt>:</p></div>
<screen>
$ bitcoin-cli gettxout 9ca8f969bd3ef5ec2a8685660fdbf7a8bd365524c2e1fc66c309ac<?pdf-cr?>bae2c14ae3 0
</screen>
<screen>
{
    "bestblock" : "0000000000000001405ce69bd4ceebcdfdb537749cebe89d371eb37e13<?pdf-cr?>899fd9",
    "confirmations" : 7,
    "value" : 0.05000000,
    "scriptPubKey" : {
        "asm" : "OP_DUP OP_HASH160 07bdb518fa2e6089fd810235cf1100c9c13d1fd2
         OP_EQUALVERIFY OP_CHECKSIG",
        "hex" : "76a91407bdb518fa2e6089fd810235cf1100c9c13d1fd288ac",
        "reqSigs" : 1,
        "type" : "pubkeyhash",
        "addresses" : [
            "1hvzSofGwT8cjb8JU7nBsCSfEVQX5u9CL"
        ]
    },
    "version" : 1,
    "coinbase" : false
}
</screen>
<div class="paragraph"><p>O que nós vemos aqui é o output que designou 50 milibits para nosso endereço <tt>1hvz&#8230;</tt>. Para gastar esse output nós iremos criar uma nova transação. Primeiro, vamos fazer um endereço para o qual nós iremos enviar o dinheiro:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>$ bitcoin-cli getnewaddress
1LnfTndy3qzXGN19Jwscj1T8LR3MVe3JDb</tt></pre>
</div></div>
<div class="paragraph"><p>Nós enviaremos 25 milibits para o novo endereço <tt>1LnfTn&#8230;</tt> que nós acabamos de criar em nossa carteira. Em nossa nova transação, nós iremos gastar o output de 50 milibit e enviar 25 milibits para esse novo endereço. Como nós temos que gastar <em>todo</em> o output da transação anterior, nós também devemos gerar algum troco. Nós iremos gerar o troco de volta para o endereço <tt>1hvz&#8230;</tt>, enviando o troco de volta para o endereço do qual o valor se originou. Finalmente, nós também teremos que pagar uma taxa para essa transação. Para pagar a taxa, nós iremos reduzir o output do troco em 0,5 milibits, e retornar 24,5 milibits em troco. A diferença entre a soma dos novos outputs (25 mBTC + 24,5 mBTC = 49,5 mBTC) e o input (50 mBTC) será coletada como uma taxa de transação pelos mineradores.</p></div>
<div class="paragraph"><p>Nós usaremos <tt>createrawtransaction</tt> para criar essa transação. Como parâmetros para <tt>createnewtransaction</tt> nós forneceremos o input da transação (o output de 50 milibits não-gastos de nossa transação confirmada) e os dois outputs de transações (dinheiro enviado para o novo endereço e troco enviado de volta para o endereço anterior):</p></div>
<screen>
$ bitcoin-cli createrawtransaction '[{"txid" : "9ca8f969bd3ef5ec2a8685660fdbf<?pdf-cr?>7a8bd365524c2e1fc66c309acbae2c14ae3", "vout" : 0}]' '{"1LnfTndy3qzXGN19Jwscj1<?pdf-cr?>T8LR3MVe3JDb": 0.025, "1hvzSofGwT8cjb8JU7nBsCSfEVQX5u9CL": 0.0245}'

0100000001e34ac1e2baac09c366fce1c2245536bda8f7db0f6685862aecf53ebd69f9a89c000<?pdf-cr?>0000000ffffffff02a0252600000000001976a914d90d36e98f62968d2bc9bbd68107564a156a<?pdf-cr?>9bcf88ac50622500000000001976a91407bdb518fa2e6089fd810235cf1100c9c13d1fd288ac0<?pdf-cr?>0000000
</screen>
<div class="paragraph"><p>O comando <tt>createrawtransaction</tt> produz uma string hex raw que codifica os detalhes da transação que nós fornecemos. Vamos confirmar que tudo está correto ao decodificar essa string raw usando o comando <tt>decoderawtransaction</tt>:</p></div>
<screen>
$ bitcoin-cli decoderawtransaction 0100000001e34ac1e2baac09c366fce1c2245536bd<?pdf-cr?>a8f7db0f6685862aecf53ebd69f9a89c0000000000ffffffff02a0252600000000001976a914d<?pdf-cr?>90d36e98f62968d2bc9bbd68107564a156a9bcf88ac50622500000000001976a91407bdb518fa<?pdf-cr?>2e6089fd810235cf1100c9c13d1fd288ac00000000
</screen>
<screen>
{
    "txid" : "0793299cb26246a8d24e468ec285a9520a1c30fcb5b6125a102e3fc05d4f3cb<?pdf-cr?>a",
    "version" : 1,
    "locktime" : 0,
    "vin" : [
        {
            "txid" : "9ca8f969bd3ef5ec2a8685660fdbf7a8bd365524c2e1fc66c309acb<?pdf-cr?>ae2c14ae3",
            "vout" : 0,
            "scriptSig" : {
                "asm" : "",
                "hex" : ""
            },
            "sequence" : 4294967295
        }
    ],
    "vout" : [
        {
            "value" : 0.02500000,
            "n" : 0,
            "scriptPubKey" : {
                "asm" : "OP_DUP OP_HASH160 d90d36e98f62968d2bc9bbd68107564a15<?pdf-cr?>6a9bcf OP_EQUALVERIFY OP_CHECKSIG",
                "hex" : "76a914d90d36e98f62968d2bc9bbd68107564a156a9bcf88ac",
                "reqSigs" : 1,
                "type" : "pubkeyhash",
                "addresses" : [
                    "1LnfTndy3qzXGN19Jwscj1T8LR3MVe3JDb"
                ]
            }
        },
        {
            "value" : 0.02450000,
            "n" : 1,
            "scriptPubKey" : {
                "asm" : "OP_DUP OP_HASH160 07bdb518fa2e6089fd810235cf1100c9c1<?pdf-cr?>3d1fd2 OP_EQUALVERIFY OP_CHECKSIG",
                "hex" : "76a91407bdb518fa2e6089fd810235cf1100c9c13d1fd288ac",
                "reqSigs" : 1,
                "type" : "pubkeyhash",
                "addresses" : [
                    "1hvzSofGwT8cjb8JU7nBsCSfEVQX5u9CL"
                ]
            }
        }
    ]
}
</screen>
<div class="paragraph"><p>Isso parece correto! Nossa nova transação "consome" o output não gasto de nossa transação confirmada e então gasta-o em dois outputs, um de 25 milibits para nosso novo endereço e outro de 24,5 milibits como troco de volta para o endereço original. A diferença de 0,5 milibits representa a taxa de transação e será creditada ao minerador que encontrar o bloco que inclui nossa transação.</p></div>
<div class="paragraph"><p>Como você pode perceber, a transação contem um <tt>scriptSig</tt> vazio porque ainda não foi assinada. Sem uma assinatura, a transação não tem sentido; nós ainda não provamos que nós <em>possuimos</em> o endereço que contém o output não-gasto. Ao assinar, nós destravamos o bloqueio no output e provamos que nós somos donos desse output e que podemos gastá-lo. Nós usaremos o comando <tt>signrawtransaction</tt> para assinar a transação. Esse comando usa a string hex da transação raw como parâmetro:</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph"><p>Um carteira criptografada deve ser desbloqueada antes que uma transação seja assinada, pois a assinatura exige acesso às chaves secretas contidas no interior da carteira.</p></div>
</td>
</tr></table>
</div>
<screen>
$ bitcoin-cli walletpassphrase foo 360
$ bitcoin-cli signrawtransaction 0100000001e34ac1e2baac09c366fce1c2245536bda8<?pdf-cr?>f7db0f6685862aecf53ebd69f9a89c0000000000ffffffff02a0252600000000001976a914d90<?pdf-cr?>d36e98f62968d2bc9bbd68107564a156a9bcf88ac50622500000000001976a91407bdb518fa2e<?pdf-cr?>6089fd810235cf1100c9c13d1fd288ac00000000
</screen>
<screen>
{
    "hex" : "0100000001e34ac1e2baac09c366fce1c2245536bda8f7db0f6685862aecf53e<?pdf-cr?>bd69f9a89c000000006a47304402203e8a16522da80cef66bacfbc0c800c6d52c4a26d1d86a54<?pdf-cr?>e0a1b76d661f020c9022010397f00149f2a8fb2bc5bca52f2d7a7f87e3897a273ef54b277e4af<?pdf-cr?>52051a06012103c9700559f690c4a9182faa8bed88ad8a0c563777ac1d3f00fd44ea6c71dc512<?pdf-cr?>7ffffffff02a0252600000000001976a914d90d36e98f62968d2bc9bbd68107564a156a9bcf88<?pdf-cr?>ac50622500000000001976a91407bdb518fa2e6089fd810235cf1100c9c13d1fd288ac00000000",
    "complete" : true
}
</screen>
<div class="paragraph"><p>O comando <tt>signrawtransaction</tt> retorna outra transação raw codificada em hex. Nós decodificaremos ela para ver o que mudou, com o comando <tt>decoderawtransaction</tt>:</p></div>
<screen>
$ bitcoin-cli decoderawtransaction 0100000001e34ac1e2baac09c366fce1c2245536bda<?pdf-cr?>8f7db0f6685862aecf53ebd69f9a89c000000006a47304402203e8a16522da80cef66bacfbc0c<?pdf-cr?>800c6d52c4a26d1d86a54e0a1b76d661f020c9022010397f00149f2a8fb2bc5bca52f2d7a7f87<?pdf-cr?>e3897a273ef54b277e4af52051a06012103c9700559f690c4a9182faa8bed88ad8a0c563777ac<?pdf-cr?>1d3f00fd44ea6c71dc5127ffffffff02a0252600000000001976a914d90d36e98f62968d2bc9b<?pdf-cr?>bd68107564a156a9bcf88ac50622500000000001976a91407bdb518fa2e6089fd810235cf1100<?pdf-cr?>c9c13d1fd288ac00000000
</screen>
<screen>
{
    "txid" : "ae74538baa914f3799081ba78429d5d84f36a0127438e9f721dff584ac17b34<?pdf-cr?>6",
    "version" : 1,
    "locktime" : 0,
    "vin" : [
        {
            "txid" : "9ca8f969bd3ef5ec2a8685660fdbf7a8bd365524c2e1fc66c309acb<?pdf-cr?>ae2c14ae3",
            "vout" : 0,
            "scriptSig" : {
                "asm" : "304402203e8a16522da80cef66bacfbc0c800c6d52c4a26d1d86<?pdf-cr?>a54e0a1b76d661f020c9022010397f00149f2a8fb2bc5bca52f2d7a7f87e3897a273ef54b277e<?pdf-cr?>4af52051a0601 03c9700559f690c4a9182faa8bed88ad8a0c563777ac1d3f00fd44ea6c71dc5<?pdf-cr?>127",
                "hex" : "47304402203e8a16522da80cef66bacfbc0c800c6d52c4a26d1d<?pdf-cr?>86a54e0a1b76d661f020c9022010397f00149f2a8fb2bc5bca52f2d7a7f87e3897a273ef54b27<?pdf-cr?>7e4af52051a06012103c9700559f690c4a9182faa8bed88ad8a0c563777ac1d3f00fd44ea6c71<?pdf-cr?>dc5127"
            },
            "sequence" : 4294967295
        }
    ],
    "vout" : [
        {
            "value" : 0.02500000,
            "n" : 0,
            "scriptPubKey" : {
                "asm" : "OP_DUP OP_HASH160 d90d36e98f62968d2bc9bbd68107564a15<?pdf-cr?>6a9bcf OP_EQUALVERIFY OP_CHECKSIG",
                "hex" : "76a914d90d36e98f62968d2bc9bbd68107564a156a9bcf88ac",
                "reqSigs" : 1,
                "type" : "pubkeyhash",
                "addresses" : [
                    "1LnfTndy3qzXGN19Jwscj1T8LR3MVe3JDb"
                ]
            }
        },
        {
            "value" : 0.02450000,
            "n" : 1,
            "scriptPubKey" : {
                "asm" : "OP_DUP OP_HASH160 07bdb518fa2e6089fd810235cf1100c9c1<?pdf-cr?>3d1fd2 OP_EQUALVERIFY OP_CHECKSIG",
                "hex" : "76a91407bdb518fa2e6089fd810235cf1100c9c13d1fd288ac",
                "reqSigs" : 1,
                "type" : "pubkeyhash",
                "addresses" : [
                    "1hvzSofGwT8cjb8JU7nBsCSfEVQX5u9CL"
                ]
            }
        }
    ]
}
</screen>
<div class="paragraph"><p>Agora, o input usado na transação contém um <tt>scriptSig</tt>, que é uma assinatura digital provando a posse do endereço <tt>1hvz&#8230;</tt> e removendo a trava no output de maneira que ele possa ser gasto. A assinatura faz com que essa transação seja verificável por qualquer nó na rede bitcoin.</p></div>
<div class="paragraph"><p>Agora está na hora de enviarmos a transação recém-criada para a rede. Nós faremos isso através do comando <tt>sendrawtransaction</tt>, que recebe a string hex raw produzida pelo <tt>signrawtransaction</tt>. Essa é a mesma string que nós recém decodificamos:</p></div>
<screen>
$ bitcoin-cli sendrawtransaction 0100000001e34ac1e2baac09c366fce1c2245536bda8<?pdf-cr?>f7db0f6685862aecf53ebd69f9a89c000000006a47304402203e8a16522da80cef66bacfbc0c8<?pdf-cr?>00c6d52c4a26d1d86a54e0a1b76d661f020c9022010397f00149f2a8fb2bc5bca52f2d7a7f87e<?pdf-cr?>3897a273ef54b277e4af52051a06012103c9700559f690c4a9182faa8bed88ad8a0c563777ac1<?pdf-cr?>d3f00fd44ea6c71dc5127ffffffff02a0252600000000001976a914d90d36e98f62968d2bc9bb<?pdf-cr?>d68107564a156a9bcf88ac50622500000000001976a91407bdb518fa2e6089fd810235cf1100c<?pdf-cr?>9c13d1fd288ac00000000ae74538baa914f3799081ba78429d5d84f36a0127438e9f721dff584<?pdf-cr?>ac17b346
</screen>
<div class="paragraph"><p>O comando <tt>sendrawtransaction</tt> retorna um <em>hash de transação (txid)</em> assim que a transação é enviada para a rede. Nós podemos agora consultar esse transaction ID com  <tt>gettransaction</tt>:</p></div>
<screen>
$ bitcoin-cli gettransaction ae74538baa914f3799081ba78429d5d84f36a0127438e9f7<?pdf-cr?>21dff584ac17b346
</screen>
<div class="listingblock">
<div class="content"></div></div>
<div class="paragraph"><p>Como anteriormente, nós também podemos examinar isso em maiores detalhes usando os comandos <tt>getrawtransaction</tt> e <tt>decodetransaction</tt>. Esses comandos irão retornar exatamente a mesma string hex que nós produzimos e codificamos anteriormente, logo antes de enviá-la à rede.</p></div>
</div>
</div>
<div class="sect2">
<h3 id="alt_libraries">Clientes Alternativos, Bibliotecas e Toolkits</h3>
<div class="paragraph"><p>Além do cliente de referência (bitcoind), outros clientes e bibliotecas podem ser usados para interagir com a rede bitcoin e as estruturas de dados. Eles são implementados em várias linguagens de programação, oferecendo aos programadores interfaces nativas em suas próprias linguagens.</p></div>
<div class="paragraph"><p>Implementações alternativas:</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<a href="https://github.com/libbitcoin/libbitcoin">libbitcoin</a>
</dt>
<dd>
<p>
Bitcoin Cross-Platform C++ Development Toolkit
</p>
</dd>
<dt class="hdlist1">
<a href="https://github.com/libbitcoin/libbitcoin-explorer">bitcoin explorer</a>
</dt>
<dd>
<p>
Ferramenta Linha de comando do Bitcoin
</p>
</dd>
<dt class="hdlist1">
<a href="https://github.com/libbitcoin/libbitcoin-server">bitcoin server</a>
</dt>
<dd>
<p>
Bitcoin Full Node e Query Server
</p>
</dd>
<dt class="hdlist1">
<a href="https://code.google.com/p/bitcoinj/">bitcoinj</a>
</dt>
<dd>
<p>
Uma biblioteca Java de um cliente full-node
</p>
</dd>
<dt class="hdlist1">
<a href="https://opensource.conformal.com/wiki/btcd">btcd</a>
</dt>
<dd>
<p>
Um cliente bitcoin full-node em linguagem Go
</p>
</dd>
<dt class="hdlist1">
<a href="https://bitsofproof.com">Bits of Proof (BOP)</a>
</dt>
<dd>
<p>
Uma implementação Java enterprise-class do bitcoin
</p>
</dd>
<dt class="hdlist1">
<a href="https://github.com/jgarzik/picocoin">picocoin</a>
</dt>
<dd>
<p>
Uma implementação C de uma biblioteca de cliente lightweight para bitcoin
</p>
</dd>
<dt class="hdlist1">
<a href="https://github.com/vbuterin/pybitcointools">pybitcointools</a>
</dt>
<dd>
<p>
Uma biblioteca Python para bitcoin
</p>
</dd>
<dt class="hdlist1">
<a href="https://github.com/richardkiss/pycoin">pycoin</a>
</dt>
<dd>
<p>
Outra biblioteca bitcoin em Python
</p>
</dd>
</dl></div>
<div class="paragraph"><p>Muitas outras bibliotecas existem em várias outras linguagens de programação e muitas mais são criadas a todo momento.</p></div>
<div class="sect3">
<h4 id="libbitcoin">Libbitcoin e Bitcoin Explorer</h4>
<div class="paragraph"><p>A biblioteca libbitcoin é um kit de ferramentas de desenvolvimento C++ de plataforma cruzada que suporta o nó de servidor completo-libbitcoin e a ferramenta de linha de comando Bitcoin Explorer (bx).</p></div>
<div class="paragraph"><p>Os commandos bx oferecem muitas das mesmas capacidades que os comandos do cliente bitcoind que foram ilustrados nesse capítulos. Os comandos bx também oferecem algumas ferramentas de administração  e de manipulação de chaves que não são oferecidas pelo bitcoind, incluindo chaves determinísticas tipo 2 e codificação mnemônica de chave, além de endereço e pagamento camuflados (stealth), e suporte a query.</p></div>
<div class="sect4">
<h5 id="_instalando_o_bitcoin_explorer">Instalando o Bitcoin Explorer</h5>
<div class="paragraph"><p>Para usar o Bitcoin Explorer, simplesmente faça o <a href="https://github.com/libbitcoin/libbitcoin-explorer/wiki/Download">download do executável assinado para seu sistema operacional</a>. Os builds estão disponíveis para a mainnet e testnet para Linux, OS X e Windows.</p></div>
<div class="paragraph"><p>Digite <tt>bx</tt> sem nenhum parâmetro para mostrar a lista de todos os comandos disponíveis (veja <a href="#appdx_bx">[appdx_bx]</a>).</p></div>
<div class="paragraph"><p>O Bitcoin Explorer também fornece um instalador para <a href="https://github.com/libbitcoin/libbitcoin-explorer/wiki/Build">fazer builds a partir de código-fontes em Linux e OS X, assim como projetos VIsual Studio para WIndows</a>. Também pode-se fazer build manual dos código-fontes usando-se Autotools. Esses também instalam a dependência de biblioteca libbitcoin.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph"><p>O Bitcoin Explorer oferece muitos comandos úteis para codificação e decodificação de endereços, e conversão para e de diferentes formatos e representações. Use-os para explorar os vários formatos como Base16 (hex), Base58, Base58Check, Base64, etc.</p></div>
</td>
</tr></table>
</div>
</div>
<div class="sect4">
<h5 id="_instalando_a_libbitcoin">Instalando a Libbitcoin</h5>
<div class="paragraph"><p>A biblioteca libbitcoin fornece um instalador para <a href="https://github.com/libbitcoin/libbitcoin/wiki/Build">building fazer builds a partir de códigos-fonte em Linux e OS X, assim como em projetos Visual Studio para Windows</a>. Também é possível fazer manualmente o build dos códigos-fonte  usando-se Autotools.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph"><p>O instalador do Bitcoin Explorer instala o bx e a biblioteca libbitcoin, se você fez o build do bx a partir das fontes, você pode pular essa etapa.</p></div>
</td>
</tr></table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_pycoin">pycoin</h4>
<div class="paragraph"><p>A biblioteca Python <a href="http://github.com/richardkiss/pycoin"><em>pycoin</em></a>, originalmente escrita e mantida por Richard Kiss, é uma livraria baseada em Python que suporta a manipulação de chaves e transações bitcoin, e até mesmo suporta a linguagem de script suficiente para lidar adequadamente com transações não-padrões.</p></div>
<div class="paragraph"><p>A biblioteca  pycoin suporta tanto o Python 2 (2.7.x) quanto o Python 3 (após 3.3), e vem com algumas utlidades de linhas de comando, ku e tx. Para instalar o pycoin 0.42 sob o Python 3 em um ambiente virtual (venv), utilize o seguinte:</p></div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre><tt>$ python3 -m venv /tmp/pycoin
$ . /tmp/pycoin/bin/activate
$ pip install pycoin==0.42
Baixando/descompactando pycoin==0.42
  Baixando o pycoin-0.42.tar.gz (66kB): 66kB baixados
  Executando o setup.py (path:/tmp/pycoin/build/pycoin/setup.py) egg_info para o pacote pycoin

Instalando pacotes coletados: pycoin
  Executando instalação setup.py para pycoin

    Instalando tx script para /tmp/pycoin/bin
    Instalando cache_tx script para /tmp/pycoin/bin
    Instalando bu script para /tmp/pycoin/bin
    Instalandog fetch_unspent script para /tmp/pycoin/bin
    Instalando block script para /tmp/pycoin/bin
    Instalando spend script para /tmp/pycoin/bin
    Instalando ku script para /tmp/pycoin/bin
    Instalando genwallet script para /tmp/pycoin/bin
pycoin instalado com sucesso
Limpando...
$</tt></pre>
</div></div>
</div></div>
<div class="paragraph"><p>Aqui está um exemplo de script Python para adquirir e gastar alguns bitcoins usando a biblioteca pycoin:</p></div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content"></div></div>
</div></div>
<div class="paragraph"><p>Para exemplos usando os utilitários de linha de comando ku e tx, veja <a href="#appdxbitcoinimpproposals">[appdxbitcoinimpproposals]</a>.</p></div>
</div>
<div class="sect3">
<h4 id="_btcd">btcd</h4>
<div class="paragraph"><p>btcd é uma implementação de bitcoin full-node programado em  Go. Ela atualmente baixa, valida e serve a blockchain usando as regras exatas (incluindo bugs) para aceitação de blocos como a implementação de referência, bitcoind. Ela também propriamente transmite blocos recém-minerados, mantém um pool de transações e transmite transações individuais que ainda não foram incluídas em um bloco. Ela garante que todas as transações individuais admitidas à pool sigam as regras exigidas e também inclui uma vas maioria de verificações mais estreitas que filtram as transações baseadas nas necessidades dos mineradores (transações "padrão")</p></div>
<div class="paragraph"><p>Uma diferença importante entre o btcd e o bitcoind é que o btcd não inclui a funcionalidade de carteira, e isso foi uma decisão de projeto muito intencional. Isso significa que você não pode fazer ou receber pagamentos diretamente com o btcd. Essa funcionalidade é fornecida pelos projetos btcwallet e btcgui, os quais estão ambos sob desenvolvimento ativo. Outras diferenças notáveis entre o btcd e o bitcoind incluem suporte no btcd para requisições HTTP POST (como no bitcoind) e os Websockets preferidos, e o fato de que as conexões RPC do btcd são habilitadas a TLS por padrão.</p></div>
<div class="sect4">
<h5 id="_instalando_btcd">Instalando btcd</h5>
<div class="paragraph"><p>Para instalar o btcd para Windows, baixe e execute o arquivo msi disponível em  <a href="https://github.com/conformal/btcd/releases">GitHub</a>, ou execute a seguinte linha de comando no Linux, assumindo que você já tenha instalado a Go language:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>$ go get github.com/conformal/btcd/...</tt></pre>
</div></div>
<div class="paragraph"><p>Para atualizar o btcd para a última versão, simplesmente execute:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>$ go get -u -v github.com/conformal/btcd/...</tt></pre>
</div></div>
</div>
<div class="sect4">
<h5 id="_controlando_o_btcd">Controlando o btcd</h5>
<div class="paragraph"><p>btcd tem várias opções de configurações, que podem ser vistas ao executar:</p></div>
<div class="listingblock">
<div class="content"></div></div>
<div class="paragraph"><p>O btcd já inclui alguns itens como o btcctl, que é um utilitário de linha de comando que pode ser usado tanto para controlar e requisitar o btcd através de RPC. O btcd não habilita seu servidor RPC por padrão; você deve configurar pelo menos tanto o usuário quanto a senha do RPC nos seguintes arquivos de configuração:</p></div>
<div class="ulist"><ul>
<li>
<p>
<em>btcd.conf</em>:
</p>
</li>
</ul></div>
<div class="listingblock">
<div class="content"></div></div>
<div class="ulist"><ul>
<li>
<p>
<em>btcctl.conf</em>:
</p>
</li>
</ul></div>
<div class="listingblock">
<div class="content"></div></div>
<div class="paragraph"><p>Ou se você quiser sobrescrever os arquivos de configuração a partir da linha de comando:</p></div>
<div class="listingblock">
<div class="content"></div></div>
<div class="paragraph"><p>Para uma lista das opções disponíveis, execute o seguinte: </p></div>
<div class="listingblock">
<div class="content">
<pre><tt>$ btcctl --help</tt></pre>
</div></div>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footnotes"><hr /></div>
<div id="footer">
<div id="footer-text">
Last updated 2015-07-15 16:56:16 UTC
</div>
</div>
</body>
</html>
